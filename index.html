<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Temp Mail - Fast OTP</title>
    <style>
        :root { --main: #00d094; --bg: #2b2d35; --dark: #1e1f26; --text: #ffffff; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--dark); color: var(--text); margin: 0; display: flex; justify-content: center; padding: 20px; }
        .app-container { width: 100%; max-width: 500px; text-align: center; }
        .logo { font-size: 28px; font-weight: bold; color: var(--main); margin-bottom: 20px; text-transform: uppercase; letter-spacing: 1px; }
        .email-section { background: var(--bg); padding: 30px; border-radius: 20px; border: 2px dashed #444; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        h2 { font-size: 18px; color: #ccc; margin-bottom: 20px; }
        #emailAddr { background: #1e1f26; border: 1px solid #444; color: #fff; font-size: 18px; width: 90%; padding: 15px; text-align: center; border-radius: 10px; outline: none; margin-bottom: 20px; font-family: monospace; }
        .btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .btn { padding: 14px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: 0.3s; font-size: 15px; }
        .btn-copy { background: var(--main); color: #000; }
        .btn-change { background: #3e404a; color: white; }
        .btn-refresh { background: var(--main); color: #000; width: 100%; margin-top: 15px; }
        .btn:hover { opacity: 0.8; transform: scale(0.98); }
        .inbox-card { background: var(--bg); margin-top: 25px; border-radius: 15px; padding: 20px; text-align: left; min-height: 150px; }
        .mail-item { background: #353842; padding: 15px; border-radius: 10px; margin-bottom: 10px; cursor: pointer; border-left: 4px solid var(--main); }
        .mail-body { background: white; color: black; padding: 15px; border-radius: 10px; margin-top: 10px; display: none; font-size: 14px; line-height: 1.5; overflow-wrap: break-word; }
        #status { font-size: 13px; color: #888; text-align: center; margin-top: 10px; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="logo">üì© Pro Temp Mail</div>
    
    <div class="email-section">
        <h2>Your Temporary Email Address</h2>
        <input type="text" id="emailAddr" readonly value="Loading...">
        
        <div class="btn-grid">
            <button class="btn btn-change" onclick="changeEmail()">üîÑ Change</button>
            <button class="btn btn-copy" onclick="copyMail()">üìã Copy</button>
        </div>
        <button class="btn btn-refresh" onclick="checkMail()">üöÄ Refresh Inbox (Get OTP)</button>
    </div>

    <div class="inbox-card">
        <h3 style="margin-top:0; font-size: 16px; color: var(--main);">Inbox</h3>
        <div id="status">Waiting for incoming messages...</div>
        <div id="emails"></div>
    </div>
</div>

<script>
    let user = "", domain = "";
    const api = "https://www.1secmail.com/api/v1/";

    function genEmail() {
        const domains = ["1secmail.com", "1secmail.org", "1secmail.net"];
        user = Math.random().toString(36).substring(2, 10);
        domain = domains[Math.floor(Math.random() * domains.length)];
        document.getElementById("emailAddr").value = user + "@" + domain;
        document.getElementById("emails").innerHTML = "";
        document.getElementById("status").style.display = "block";
    }

    function changeEmail() {
        if(confirm("Generate new email? All current messages will be deleted.")) {
            genEmail();
        }
    }

    async function checkMail() {
        const status = document.getElementById("status");
        status.innerText = "Checking for new messages...";
        try {
            const res = await fetch(`${api}?action=getMessages&login=${user}&domain=${domain}`);
            const data = await res.json();
            const list = document.getElementById("emails");
            
            if(data.length > 0) {
                status.style.display = "none";
                list.innerHTML = "";
                data.forEach(m => {
                    const item = document.createElement("div");
                    item.className = "mail-item";
                    item.innerHTML = `<strong>From:</strong> ${m.from}<br><strong>Subject:</strong> ${m.subject}`;
                    item.onclick = () => readMail(m.id);
                    list.appendChild(item);

                    const body = document.createElement("div");
                    body.id = "body-" + m.id;
                    body.className = "mail-body";
                    list.appendChild(body);
                });
            } else {
                status.innerText = "No messages found yet. Click Refresh again.";
            }
        } catch (e) {
            status.innerText = "Connection error. Please try again.";
        }
    }

    async function readMail(id) {
        const res = await fetch(`${api}?action=readMessage&login=${user}&domain=${domain}&id=${id}`);
        const data = await res.json();
        const b = document.getElementById("body-" + id);
        // OTP ‡¶ï‡ßã‡¶° ‡¶¨‡¶æ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∑‡ßü‡¶¨‡¶∏‡ßç‡¶§‡ßÅ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá
        b.innerHTML = data.body || "No content available.";
        b.style.display = b.style.display === "block" ? "none" : "block";
    }

    function copyMail() {
        const el = document.getElementById("emailAddr");
        el.select();
        document.execCommand("copy");
        alert("Email Address Copied!");
    }

    window.onload = genEmail;
</script>

</body>
</html>
